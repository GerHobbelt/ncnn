<html><head><base target="_blank"><style>img {width: 200px;}</style></head><body><textarea rows=40 cols=300 ondblclick=repurl(this)>
==
==
</textarea></body>
<script>
var klyk=-1;
var lynks=null;

function kypreDOWN(e) {
klyk++;
document.title=klyk;
lynks[klyk].click();
lynks[klyk].innerText='0';
}

function kypreUP(e) {
klyk--;
document.title=klyk;
lynks[klyk].click();
lynks[klyk].innerText='0';
}

const vtwsig=	['',				'@',				'!',			'+'];
const vtwimg=['https://pbs.twimg.com/ext_tw_video_thumb/',	'https://pbs.twimg.com/amplify_video_thumb/',	'https://pbs.twimg.com/tweet_video_thumb/','https://pbs.twimg.com/media/'];
const vtwvid=['https://video.twimg.com/ext_tw_video/',		'https://video.twimg.com/amplify_video/',		'https://video.twimg.com/tweet_video/'];


function vidstr(src)
{
	var c0=src.charAt(0);
	for(var i=1;i<3;i++){if(c0==vtwsig[i]){return vtwvid[i]+src.substring(1);}}
	return vtwvid[0]+src;
}

function thumbstr(src)
{
	var c0=src.charAt(0);
	for(var i=1;i<4;i++){if(c0==vtwsig[i]){return vtwimg[i]+src.substring(1);}}
	return vtwimg[0]+src;
}


const kx1='<a href="https://twitter.com/i/status/';
const kx2='"><br>====</a>';

const mgx3='" />';

var kv=function(e)
{
var ele=e.currentTarget;
window.open(vidstr(ele.alt), null, null);
}

var hv=function(e)
{
var ele=e.currentTarget;
var sig=ele.title;
if(sig=='i')
{
if(ele.naturalWidth==0)
{
ele.src=ele.src.slice(0,-6);
ele.dta='r';
}

ele.title='';
ele.onmouseover=null;
return;
}
ele.src=thumbstr(sig)+':thumb';
ele.title='i';
ele.onclick=kv;

}

function mkymg(str)
{
	var jk=str.split('\t');
	if(jk.length>2)
	{
		return '<img title="'+jk[0]+'" alt="'+jk[1]+mgx3;
	}
	return '----';

}

function repurl(yina)
{
var yza=yina.value.split('\n');
var yzal=yza.length;
var sti="";

var k_up=false;

if(yza[0].charAt(0)=='v')
{
	for(i=1;i<yzal;i++)
	{
	sti+=kx1+yza[i]+kx2;
	}
	document.onkeydown=kypreUP;
	k_up=true;
} else {
	for(i=0;i<yzal;i++)
	{
	if(yza[i].charAt(0)==';'){sti+=kx1+yza[i].substring(1)+kx2;}
	else{sti+=mkymg(yza[i]);}
	}
	document.onkeydown=kypreDOWN;
}
yina.outerHTML=sti;

lynks=document.getElementsByTagName('img');
klyk=lynks.length;

for(var i=0;i<klyk;i++)
{
lynks[i].onmouseover=hv;
}

lynks=document.getElementsByTagName('a');

if(k_up){klyk=lynks.length-1}
else{klyk=0;}

}



</script></html>
