<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=gb18030">
<link href="spkhtml.css" rel="stylesheet"/>
</head>
<body>
<svg class="animated"><defs>
<filter id="blmpg"><feGaussianBlur stdDeviation="3" result="bml" />
<feBlend mode="screen" in="bml" in2="SourceGraphic" /></filter>
</defs></svg>

</body>
<script src="txt.js" charset="gb18030"></script>
<script>
var curspk=0;
function vend()
{
	curspk++;
	var tossp=txt[curspk];
	
	utterThis.text=tossp;
	synth.speak(utterThis);

	txtsec[curspk-1].className='';
	txtsec[curspk].className='yka';
	txtsec[curspk].scrollIntoView();

}

function foka()
{
	txtsec[curspk].scrollIntoView();
}

var spking=true;
function psrs()
{
	if(spking){synth.pause();}
	else{synth.resume();}

	spking=!spking;

}

function startspk()
{
	filltzec();
	voi=synth.getVoices()[0];
	utterThis.voice=voi;
	synth.speak(utterThis);
	txtsec[0].className='yka';
	document.body.onclick=foka;
	document.onkeydown=psrs;
	
}

var yetpaste=true;

function ppp2()
{
document.body.onclick=null;
if(yetpaste)
{

	yetpaste=false;
	var preshow=document.createElement('textarea');
	preshow.cols=200;
	preshow.rows=100;
	preshow.onblur=ppp2;
	document.body.appendChild(preshow);

	

}
else
{

	
	this.onblur=null;
	var tzt=this.value.replaceAll('\r','').replaceAll("'",'"').split('\n');

	var txtl=tzt.length;
	var otstr='var txt=[';
	var tmpcole='';
	for(var i=0;i<txtl;i++)
	{
		if(tzt[i].length==0){continue;}
		if(tmpcole.length>1024)
		{
			otstr+="'"+tmpcole+"',\n";
			tmpcole='';
		}
		tmpcole+=tzt[i]+'\\'+'n';

		
	}

	this.value=otstr.replaceAll('\\'+"n',","\',")+"'"+tmpcole+"'];";

}

}

function ppp()
{
	document.body.onclick=null;
	var preshow=document.createElement('pre');
	document.body.appendChild(preshow);
	var txtl=txt.length;
	var otstr='var txt=[';
	var tmpcole='';
	for(var i=0;i<txtl;i++)
	{
		if(tmpcole.length>1024)
		{
			otstr+="'"+tmpcole+"',\n";
			tmpcole='';
		}
		tmpcole+=txt[i]+'\\'+'n';

		
	}
	otstr+="'"+tmpcole+"'];";
	preshow.innerText=otstr;


}

function filltzec()
{
	var txtl=txt.length;
	
	for(var i=0;i<txtl;i++)
	{
		var txtshow=document.createElement('h2');
		txtshow.innerHTML=txt[i].replaceAll('\n','<br><br><br>').replaceAll('¡£','¡£<br><br>');
		document.body.appendChild(document.createTextNode("spk="+i));
		document.body.appendChild(txtshow);

		txtsec[i]=txtshow;
	}

}

var txtsec=new Array(txt.length);


var synth = window.speechSynthesis;
var voi=null;
var utterThis = new SpeechSynthesisUtterance(txt[0]);
utterThis.onend=vend;
document.body.onclick=startspk;
</script>


</html>